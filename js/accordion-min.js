const defaultOptions={duration:300,initAccessibility:!0,openInInit:null,multiple:!1,collapse:!0,accordionItem:"[data-accordion]",accordionItemButton:"[data-accordion-button]",accordionItemBody:"[data-accordion-body]",activeClass:"js-accordion-open"};class Accordion{constructor(t,e){this.options=Object.assign({},defaultOptions,e),this.elements=t.querySelectorAll(this.options.accordionItem),0===this.options.activeClass.length&&console.error("Ошибка: Наличие активного класса обязательно для продолжения работы скрипта!"),this.addEvent()}addEvent(){for(let t=0;t<this.elements.length;t++){const e=this.elements[t],i=e.querySelector(this.options.accordionItemButton),s=e.querySelector(this.options.accordionItemBody);if(i||console.error("Ошибка: Не найдена кнопка аккордиона у элемента",e),s||console.error("Ошибка: Не найдено тело аккордиона у элемента",e),i.addEventListener("click",()=>{this.toggle(t)}),s.style.transitionDuration=this.options.duration+"ms",s.style.overflow="hidden",s.addEventListener("transitionend",()=>{"0px"!==s.style.height&&(s.style.height="")}),this.options.initAccessibility){const e=s.getAttribute("id")?s.getAttribute("id"):this.options.accordionItemBody.replace(/[^\w\s]/gi,"")+"-"+t,o=i.getAttribute("id")?s.getAttribute("id"):this.options.accordionItemButton.replace(/[^\w\s]/gi,"")+"-"+t;i.setAttribute("id",o),i.setAttribute("type","button"),i.setAttribute("role","button"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-disabled","false"),i.setAttribute("aria-controls",e),s.setAttribute("id",e),s.setAttribute("role","region"),s.setAttribute("aria-labelledby",o)}}null!==this.options.openInInit&&this.open(this.options.openInInit)}getOpenAccordionCount(){let t=0;for(let e=0;e<this.elements.length;++e)this.elements[e].classList.contains(this.options.activeClass)&&t++;return t}open(t,e=!1){const i=this.elements[t];i&&(this.options.multiple||e||this.closeAll(),setTimeout(()=>{const t=i.querySelector(this.options.accordionItemBody);if(t.style.height=t.scrollHeight+"px",i.classList.add(this.options.activeClass),this.options.initAccessibility){const t=i.querySelector(this.options.accordionItemButton);t.setAttribute("aria-expanded","true"),t.setAttribute("aria-disabled","true")}}))}close(t){const e=this.elements[t];if(e){const t=e.querySelector(this.options.accordionItemBody);t.style.height=t.scrollHeight+"px",setTimeout(()=>{if(e.classList.remove(this.options.activeClass),t.style.height="0",this.options.initAccessibility){const t=e.querySelector(this.options.accordionItemButton);t.setAttribute("aria-expanded","false"),t.setAttribute("aria-disabled","false")}})}}toggle(t){const e=this.elements[t];e&&(e.classList.contains(this.options.activeClass)?(this.options.collapse||this.getOpenAccordionCount()>1)&&this.close(t):this.open(t))}toggleAll(){for(let t=0;t<this.elements.length;t++)this.toggle(t)}openAll(){for(let t=0;t<this.elements.length;t++)this.open(t,!0)}closeAll(){for(let t=0;t<this.elements.length;t++)this.close(t)}}